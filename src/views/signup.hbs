{{!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/signup.css">
    <link rel="shortcut icon" href="assets/tab-icon.png" type="image/x-icon">
    <script src="script/general.js"></script>

    <!-- noty -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/noty@3.1.4/lib/noty.css">
    <script src="https://cdn.jsdelivr.net/npm/noty@3.1.4/lib/noty.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/parsley.js/2.9.2/parsley.min.js"></script>
    
    
    <title>BiteBoxd - Sign up</title>
    <script src="script/signup.js"></script>    
</head>
<body>
    <header>
        <div class="back-button">
            <a href="index">
                <img src="assets/back.png" alt="" class="back">
            </a>
        </div>
        <button class="redirect-button" onclick="window.location.href = 'login'">
            <a href="login" class="redirect">Log In</a>
        </button>
    </header>
    <main>
        <div class="logo-big">
            <img src="assets/logo.png" alt="" class="logo">
        </div>
        <div class="yellow-box login" id="yellow-box">
            <div class="sliders">
                <div class="ellipse ellipse-clicked" id="ellipse-1"></div>
                <div class="ellipse" id="ellipse-2"></div>
                <div class="ellipse" id="ellipse-3"></div>
            </div>

            <p class="logo-text">Sign Up</p>

            <form class="login-form" id="form1">
                <div class="name-box">
                    <div class="box first-name-box">
                        <p class="input-label">First Name</p>
                        <input type="text" id="first-name" data-parsley-trigger="change" required data-parsley-pattern="^[a-zA-Z\s]+$" >
                    </div>
                    <div class="box last-name-box">
                        <p class="input-label">Last Name</p>
                        <input type="text" id="last-name"  data-parsley-trigger="change"  required data-parsley-pattern="^[a-zA-Z\s]+$">
                    </div>
                </div>
            
                <div class="box username-box">
                    <p class="input-label">Username</p>
                    <input type="text" id="username"  data-parsley-trigger="change" required data-parsley-pattern="^[a-zA-Z0-9]+$"> 
                </div>
                <div class="box email-box">
                    <p class="input-label">Email</p>
                    <input type="email" id="email" name="email" required data-parsley-type="email" data-parsley-trigger="change">
                </div>
            
                <div class="box password-box">
                    <p class="input-label">Password</p>
                    <input type="password" id="password" name="password" required data-parsley-minlength="8" data-parsley-trigger="change">  
                    <img src="assets/see.svg" alt="" class="show-password" id="show-password" onclick="togglePasswordVisibility()">
                </div>
            
                <div class="box confirm-password-box password-box">
                    <p class="input-label">Confirm Password</p>
                    <input type="password" id="password" name="password" required data-parsley-minlength="8" data-parsley-trigger="change">
                    <img src="assets/see.svg" alt="" class="show-password" id="show-password" onclick="togglePasswordVisibility()">
                </div>
            
                <div class="action-button-container">
                    <button class="action-button" id="toForm2">Continue</button>
                </div>
            </form>

            <div class="login-form hide-form" id="form2">
                <div class="yellow-box-container tag-layers" id="form2container">
                    <div class="layer">
                        <div class="tag" onclick="toggleTag(this)">Salty</div>
                        <div class="tag" onclick="toggleTag(this)">Sweet</div>
                    </div>
                    <div class="layer">
                        <div class="tag" onclick="toggleTag(this)">Sour</div>
                        <div class="tag" onclick="toggleTag(this)">Bitter</div>
                        <div class="tag" onclick="toggleTag(this)">Japanese</div>
                    </div>
                    <div class="layer">
                        <div class="tag" onclick="toggleTag(this)">Chinese</div>
                        <div class="tag" onclick="toggleTag(this)">Italian</div>
                        <div class="tag" onclick="toggleTag(this)">Korean</div>
                    </div>
                    <div class="layer">
                        <div class="tag" onclick="toggleTag(this)">Filipino</div>
                        <div class="tag" onclick="toggleTag(this)">Indian</div>
                    </div>
                    <div class="action-button-container">
                        <button class="action-button" id="toForm3">Sign up</button>
                    </div>
                </div>
            </div> 

            <div class="login-form hide-form" id="form3">
                <form class="yellow-box-container  avatar-container">
                    <div class="two-avatar">
                        <div class="pic-option" onclick="clickAvatar(this)"><img src="assets/avatar-f1.png" alt="" class="avatar"></div>
                        <div class="pic-option" onclick="clickAvatar(this)"><img src="assets/avatar-f2.png" alt="" class="avatar"></div>
                    </div>
                    <div class="two-avatar">
                        <div class="pic-option" onclick="clickAvatar(this)"><img src="assets/avatar-m1.png" alt="" class="avatar"></div>
                        <div class="pic-option" onclick="triggerFileInput(this)">   
                             <input type="file" id="avatar-upload" class="avatar-upload">   
                            <img src="assets/upload.svg" alt="" class="upload-icon">                     </div>
                    </div>

                    <div class="action-button-container">
                        <button class="action-button">Sign up</button>
                    </div>
                </form>
            </div>

        </div>
        <div class="policy">
            <p>By signing in to BiteBoxd, you agree to our Terms and Privacy Policy.</p>
        </div>
    </main>

    <script>
        $(document).ready(function() {
            $('#form1').parsley();

            $('#form1').on('submit', function(e) {
                if ($('#form1').parsley().isValid()) {
                    document.getElementById("yellow-box").classList.add('turn-white');
                    document.getElementById('form1').classList.add('hide-form');
                    document.getElementById('form2').classList.remove('hide-form');
                
                    document.getElementById('ellipse-2').classList.add('ellipse-clicked');
                    document.getElementById('form2container').classList.add('adjustForm2');
                    document.getElementById('toForm3').classList.add('adjustButton2');
                } 
                e.preventDefault(); // Prevent form submission
            });
        });           
      initializeSignUp(); 

      function toggleTag(tag) {
    tag.classList.toggle('selected');
}

function triggerFileInput(element) {
    
    clickAvatar(element);
    var input = document.getElementById('avatar-upload');
    input.click();
}

function clickAvatar(element) {

    
    var inputs = document.querySelectorAll('.pic-option'); 
    inputs.forEach(function(input) {
        input.classList.remove('clicked');
    });
    

    var input = element.querySelector('pic-option');
    element.classList.add('clicked');
}

function initializeSignUp(){
    
    
    document.getElementById('toForm3').addEventListener('click', function(event) {
        event.preventDefault(); // Prevent default form submission behavior
    
        // Validate the form using Parsley.js
        $('#form2').parsley().validate();
    
        if ($('#form2').parsley().isValid()) {
            // Form is valid, proceed to the next step
            document.getElementById('form2').classList.add('hide-form');
            document.getElementById('form3').classList.remove('hide-form');
            document.getElementById('ellipse-3').classList.add('ellipse-clicked');
        } else {
        }
    });
    
    
}
    </script>
    
    
</body>
</html> --}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BiteBoxd - Sign up</title>
    <link rel="stylesheet" href="/styles/signup.css">
    <link rel="shortcut icon" href="/assets/tab-icon.png" type="image/x-icon">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parsley.js/2.9.2/parsley.min.js"></script>
</head>
<body>
    <header>
        <div class="back-button">
            <a href="/index"><img src="/assets/back.png" alt="Back" class="back"></a>
        </div>
        <button class="redirect-button">
            <a href="/login" class="redirect">Log In</a>
        </button>
    </header>
    <main>
        <div class="logo-big">
            <img src="/assets/logo.png" alt="Logo" class="logo">
        </div>
        <div class="form-container">
            <form id="signupForm" enctype="multipart/form-data">
                <!-- Step 1: Personal Information -->
                <section id="step1">
                    <h2>Personal Information</h2>
                    <input type="text" name="firstName" placeholder="First Name" required>
                    <input type="text" name="lastName" placeholder="Last Name" required>
                    <input type="text" name="username" placeholder="Username" required>
                    <input type="email" name="email" placeholder="Email" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <input type="password" name="confirmPassword" placeholder="Confirm Password" required>
                    <button type="button" onclick="showNextStep()">Next</button>
                </section>

                <!-- Step 2: Taste Profile -->
                <section id="step2" style="display:none;">
                    <h2>Taste Profile</h2>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Salty" id="salty">
                        <label for="salty">Salty</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Sweet" id="sweet">
                        <label for="sweet">Sweet</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Sour" id="sour">
                        <label for="sour">Sour</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Bitter" id="bitter">
                        <label for="bitter">Bitter</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Japanese" id="japanese">
                        <label for="japanese">Japanese</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Chinese" id="chinese">
                        <label for="chinese">Chinese</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Italian" id="italian">
                        <label for="italian">Italian</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Korean" id="korean">
                        <label for="korean">Korean</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Filipino" id="filipino">
                        <label for="filipino">Filipino</label>
                    </div>
                    <div>
                        <input type="checkbox" name="tasteProfile" value="Indian" id="indian">
                        <label for="indian">Indian</label>
                    </div>
                    <!-- Add more taste preferences as needed -->
                    <button type="button" onclick="showNextStep()">Next</button>
                </section>

                <!-- Step 3: Avatar Selection -->
                <section id="step3" style="display:none;">
                    <h2>Select Your Avatar</h2>
                    <input type="file" name="avatar" accept="image/*">
                    <button type="submit">Sign Up</button>
                </section>
            </form>
        </div>
    </main>
    <script>
        function showNextStep() {
            let currentStep = $('section:visible');
            let nextStep = currentStep.next('section');
            if(nextStep.length) {
                currentStep.hide();
                nextStep.show();
            }
        }

        $(document).ready(function() {
            $('#signupForm').parsley();
            $('#signupForm').on('submit', function(e) {
                e.preventDefault();
                if ($(this).parsley().isValid()) {
                    // Serialize form data
                    var formData = new FormData(this);

                    $.ajax({
                        type: "POST",
                        url: "/signup",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function(response) {
                            window.location.href = '/login';
                        },
                        error: function(response) {
                            alert('An error occurred. Please try again.');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>


